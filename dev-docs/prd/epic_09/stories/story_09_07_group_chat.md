# Story 09-07: GroupChatArea 并行渲染 (UI)

> Epic: AI 多人群聊 (Group Chat)
> Priority: High
> Points: 8

## 概述
开发专门的群聊交互界面 `GroupChatArea.vue`。重点解决多角色并发生成时的状态同步、消息渲染以及 UI 锁定逻辑，提供高度仿真的"多人在线聊天"体验。

## 用户故事

### US-1: 并行状态感知
**作为** 用户，
**我希望** 在群聊里发送消息后，看到所有被点名的 AI 同时显示"对方正在输入..."，
**以便** 感知到群组的活跃度和系统的处理进度。

### US-2: 仿真消息弹出
**作为** 用户，
**我希望** 消息是以完整气泡的形式瞬间弹出，而不是缓慢地打字显示，
**以便** 模拟真实微信群聊中消息发送成功后的即时反馈感。

## 功能范围

### 包含
- **GroupChatArea 开发**: 创建独立的群聊视图组件，解耦单聊与群聊的复杂分支逻辑。
- **并发状态管理器**: 维护一个 `pending_agents` 列表，在界面上渲染多个 Agent 的思考/输入状态条。
- **发送锁逻辑**: 只要 `pending_agents` 不为空，输入框和发送按钮均处于 `disabled` 状态。
- **非流式消息展示**: 修改消息监听逻辑，仅在收到 `done` 事件或完整的 `message` 数据后才将其插入对话流。
- **自适应布局**: 确保在不同屏幕尺寸下，多个 Agent 的输入状态提示不会互相遮挡或溢出。

### 不包含（后续迭代）
- 消息撤回 UI 
- 手动中止特定 Agent 生成的功能
- 消息已读/未读回执

## 验收标准

- [ ] AC-1: 实现 `GroupChatArea.vue`，并能通过侧边栏点击群组正确路由。
- [ ] AC-2: 当多个 Agent 同时回复时，UI 能正确并排或顺序显示他们的"正在输入"动画。
- [ ] AC-3: 消息气泡一次性完整出现，没有任何打字机效果残留。
- [ ] AC-4: 发送锁能准确捕获后端 SSE 的所有 `start` 到 `done` 的完整生命周期。
- [ ] AC-5: 不同 Agent 的消息气泡应携带其各自的头像和群昵称。
- [ ] AC-6: 当超过 2 人同时发言时，正在输入状态显示为 `[A]、[B] 等 N 人正在输入...`。

## 依赖关系

### 前置依赖
- Story 09-03: 群组管理界面开发 (UI)
- Story 09-05: 群聊消息服务接口 (API & SSE)

### 被依赖（后续）
- Story 09-08: 隐藏的群管理员 Agent 实现
