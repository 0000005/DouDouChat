# Epic 03: 聊天详情抽屉菜单

## Epic 信息
- **Epic 编号**: Epic-03
- **Epic 名称**: 聊天详情抽屉菜单
- **创建日期**: 2026-01-05
- **优先级**: Medium

## 业务目标

在微信中，用户可以通过点击聊天界面右上角的三点按钮打开一个抽屉面板，快速访问当前聊天的相关功能和设置。这是微信用户非常熟悉的交互模式。

本 Epic 的目标是为唯信（WeAgentChat）实现类似的聊天详情抽屉功能。用户点击 `ChatArea.vue` 中的 `more-btn` 按钮后，将从右侧滑出一个抽屉面板，提供会话列表、记忆列表、消息搜索、顶置聊天和清空记录等快捷操作入口。

这个功能将提升用户操作效率，让用户能够快速管理与当前 AI 好友的互动历史，同时也是唯信 Memory 系统能力的重要展示窗口——用户可以直观地看到 AI 从对话中提取的"事件记忆"。

## 范围描述

### 包含内容
- **抽屉组件**: 右侧滑入的抽屉面板 UI 组件
- **会话列表**: 展示与当前好友的历史会话列表
- **记忆列表**: 展示 Memobase 为当前好友生成的事件记忆
- **查找聊天记录**: 搜索当前好友的历史消息
- **顶置聊天**: 将当前好友置顶显示在侧边栏
- **清空聊天记录**: 清除与当前好友的所有聊天记录

### 不包含内容
- 好友资料编辑功能（已在 Profile 管理中）
- 多媒体文件管理（图片、文件等）
- 群聊相关功能
- 好友删除/拉黑功能

## 用户旅程

```
用户正在与 AI 好友聊天
    ↓
点击右上角三点按钮 [more-btn]
    ↓
抽屉从右侧滑入，显示菜单列表
    ↓
用户可进行以下操作：
    ├→ 点击"会话列表" → 查看历史会话 → 可切换到旧会话
    ├→ 点击"记忆列表" → 查看事件记忆卡片 → 了解 AI 记住了什么
    ├→ 点击"查找聊天记录" → 进入搜索界面 → 关键词搜索消息
    ├→ 点击"顶置聊天" → 切换顶置状态 → 好友在列表中置顶显示
    └→ 点击"清空聊天记录" → 确认弹窗 → 清除所有历史消息
    ↓
点击抽屉外部或关闭按钮，抽屉滑出关闭
```

## Story 拆分建议

| Story | 描述 | 优先级 |
|-------|------|--------|
| Story 03-01 | 实现基础抽屉组件和菜单框架 | High |
| Story 03-02 | 会话列表功能 - 展示历史会话并支持切换 | High |
| Story 03-03 | 记忆列表功能 - 展示 Memobase 事件记忆 | High |
| Story 03-04 | 查找聊天记录功能 - 消息搜索与定位 | Medium |
| Story 03-05 | 顶置聊天功能 - 好友置顶状态管理 | Medium |
| Story 03-06 | 清空聊天记录功能 - 批量删除与确认 | Medium |

## 技术约束（可选）

- **前端**: 使用 Vue 3 + shadcn-vue 的 Sheet/Drawer 组件
- **后端 API**: 复用现有 session/message API，新增顶置状态字段
- **Memobase 集成**: 通过现有 memo bridge 获取事件记忆列表
- **UI 风格**: 严格参考微信聊天详情页的视觉设计

## 依赖关系

### 前置依赖
- Epic-01: 核心聊天功能（已完成）
- Epic-02: 个人资料管理（已完成 - Memobase 接口可用）

### 后续 Epic
- 无直接后续依赖
